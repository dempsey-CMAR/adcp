<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Apply tidal bin height test to adcp data — adcp_test_tidal_bin_height • adcp</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Apply tidal bin height test to adcp data — adcp_test_tidal_bin_height"><meta name="description" content='ADCP data from bins near the surface can be contaminated by "side-lobe
interference." These observations were automatically removed from the data
output by the ADCP software.'><meta property="og:description" content='ADCP data from bins near the surface can be contaminated by "side-lobe
interference." These observations were automatically removed from the data
output by the ADCP software.'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">adcp</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">4.0.3</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/cut_function.html">Exploring Base R's cut() function</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Apply tidal bin height test to adcp data</h1>

      <div class="d-none name"><code>adcp_test_tidal_bin_height.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>ADCP data from bins near the surface can be contaminated by "side-lobe
interference." These observations were automatically removed from the data
output by the ADCP software.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">adcp_test_tidal_bin_height</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  sensor_model <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  inst_alt_m <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  bin_height_m <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  beam_angle <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min_prop_obs <span class="op">=</span> <span class="fl">0.25</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-dat">dat<a class="anchor" aria-label="anchor" href="#arg-dat"></a></dt>
<dd><p>Data frame of current variables in wide format.</p></dd>


<dt id="arg-sensor-model">sensor_model<a class="anchor" aria-label="anchor" href="#arg-sensor-model"></a></dt>
<dd><p>ADCP model used to collect data. Used to determine the
beam angle. Must be one of "Sentinel_V20", "Sentinel_V50", "Sentinel_V100",
or "Workhorse Sentinel 600 kHz". Not required if <code>beam_angle</code> argument
is supplied.</p></dd>


<dt id="arg-inst-alt-m">inst_alt_m<a class="anchor" aria-label="anchor" href="#arg-inst-alt-m"></a></dt>
<dd><p>Height of the ADCP transducer above
the sea floor, in metres.</p></dd>


<dt id="arg-bin-height-m">bin_height_m<a class="anchor" aria-label="anchor" href="#arg-bin-height-m"></a></dt>
<dd><p>Height of each measurement bin in metres.</p></dd>


<dt id="arg-beam-angle">beam_angle<a class="anchor" aria-label="anchor" href="#arg-beam-angle"></a></dt>
<dd><p>ADCP beam angle. Only required if <code>sensor_model</code> is
not provided.</p></dd>


<dt id="arg-min-prop-obs">min_prop_obs<a class="anchor" aria-label="anchor" href="#arg-min-prop-obs"></a></dt>
<dd><p>The proportion of observations in the bin relative to the
maximum number of observations in a bin. Bins with prop_obs &gt; min_prop_obs
and h &lt; hmax will be flagged 3. Bins with prop_obs &lt; min_prop_obs and h &lt;
hmax will be flagged 4. Default is 0.25.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns <code>dat</code> with additional column
  <code>bin_heigh_flag_value</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The tide can substantially impact the depth of the ADCP. At high tide, there
may be more "good" bins further from the sensor than at low tide. The sea
water speed and direction recorded in these high-altitude bins will be
accurate, but not representative of the long-term average because they are
only recorded at high-water times.</p>
<p>The maximum range from the ADCP for acceptable data depends on the sensor
depth and the beam angle of the ADCP:</p>
<p>\(h = D*cos(theta)\).</p>
<p>Accounting for the sensor height above the sea floor and averaging across
bins, the maximum acceptable range is:</p>
<p>\(h_max = D*cos(theta) + sensor height above sea floor - bin height\).</p>
<p>This test assigns the same flag to all data in a given bin based on this
equation and the number of observations in the bin. D is the minimum depth
recorded over the deployment, and theta is the beam angle based on the sensor
model specifications. Any bin heights greater than h +
sensor_height_above_sea_floor_m are flagged as "Suspect/Of Interest". Any
bins that also have fewer than 25 <!-- % of the number of observations in the bin -->
with the most observations will be flagged "Fail."</p>
<p>Assumes negligible wave height.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Danielle Dempsey.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

